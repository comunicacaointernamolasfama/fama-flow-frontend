<!-- Incluir a biblioteca do Supabase -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<!-- Estilização Básica para Deixar Mais Apresentável -->
<style>
  body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100vh;
    margin: 0;
    background-color: #f4f4f9;
  }
  #auth-container, #app-container {
    width: 100%;
    max-width: 400px;
    padding: 2rem;
    background-color: white;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    border-radius: 8px;
    text-align: center;
  }
  h2 {
    margin-top: 0;
    margin-bottom: 1.5rem;
    color: #333;
  }
  input {
    display: block;
    width: 100%;
    padding: 0.75rem;
    margin-bottom: 1rem;
    border: 1px solid #ddd;
    border-radius: 4px;
    box-sizing: border-box; /* Garante que o padding não aumente a largura */
  }
  button {
    width: 100%;
    padding: 0.75rem;
    border: none;
    border-radius: 4px;
    background-color: #007bff;
    color: white;
    font-size: 1rem;
    cursor: pointer;
    transition: background-color 0.2s;
  }
  button:hover {
    background-color: #0056b3;
  }
  #logout-button {
    background-color: #dc3545;
  }
  #logout-button:hover {
    background-color: #c82333;
  }
</style>

<!-- Estrutura HTML -->
<div id="auth-container">
  <h2>Login Fama Flow</h2>
  <form id="login-form">
    <input type="email" id="email" placeholder="Seu email" required value="everton.mereles.teste@email.com" />
    <input type="password" id="password" placeholder="Sua senha" required value="senha-forte-de-teste" />
    <button type="submit">Entrar</button>
  </form>
</div>
<div id="app-container" style="display: none;">
  <h2>Bem-vindo ao Fama Flow!</h2>
  <p>Login realizado com sucesso.</p>
  <button id="logout-button">Sair</button>
</div>

<!-- Lógica JavaScript com suas chaves -->
<script>
  const SUPABASE_URL = 'https://flegnghsopbrulnnpuvz.supabase.co';
  const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZsZWduZ2hzb3BicnVsbm5wdXZ6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI3NDc2MjMsImV4cCI6MjA3ODMyMzYyM30.oZN5gJyNemgYT8nKsXwK9y8cYY_SjLR-sfMqZeaOdQ4';
  const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

  const loginForm = document.getElementById('login-form');
  const authContainer = document.getElementById('auth-container');
  const appContainer = document.getElementById('app-container');
  const logoutButton = document.getElementById('logout-button');

  loginForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;
    
    const { data, error } = await supabase.auth.signInWithPassword({ email, password });

    if (error) {
      alert('Erro no login: ' + error.message);
    } else {
      showApp();
    }
  });
  
  logoutButton.addEventListener('click', async () => {
    await supabase.auth.signOut();
    showLogin();
  });

  function showApp() {
    authContainer.style.display = 'none';
    appContainer.style.display = 'block';
  }
  
  function showLogin() {
    appContainer.style.display = 'none';
    authContainer.style.display = 'block';
  }

  // Verifica se o usuário já está logado ao carregar a página
  supabase.auth.onAuthStateChange((event, session) => {
    if (session) {
      showApp();
    } else {
      showLogin();
    }
  });
</script>
